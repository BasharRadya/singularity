<!--

    A template for near-instantaneous deployment of websites
    Copyright (C) 2019 Joel Savitz and Chris Odom

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

-->

<script>
(function(b, o, i, l, e, r) {
b.GoogleAnalyticsObject = l;
b[l] || (b[l] =
    function() {
	(b[l].q = b[l].q || []).push(arguments)
    });
b[l].l = +new Date;
e = o.createElement(i);
r = o.getElementsByTagName(i)[0];
e.src = 'https://www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e, r)
}(window, document, 'script', 'ga'));
ga('create', 'UA-136417829-2', 'auto');
ga('send', 'pageview');
</script>

<link rel="stylesheet" type="text/css" href="style.css" />

<div style="display:inline-flex;">
<img src="kdlp_logo.png" style="width:8em;height:8em;padding-right:5px;" alt="[KDLP] logo" />
<h1>Kernel Development Learning Pipeline</h1>
</div>

<hr>
<p><a href="index.html">Home</a>
| <a href="https://github.com/orgs/underground-software">GitHub</a>
| <a href="https://underground.software">Underground</a>
| <a href="info.html">Info</a>
| <a href="who.html">Who</a>
| <a href="course.html">Course</a>
</p>
<hr>
<h3 id="a4---scavenger-hunt">A4 - Scavenger Hunt üîé</h3>
<p>We will assign you a syscall and give you our specially designed program.</p>
<h4 id="outcomes">Outcomes:</h4>
<ul>
<li>Learn basic Linux kernel tracing</li>
<li>Get a basic understanding of BPF via <code>bpftrace</code></li>
<li>Strengthen understanding of the interaction between the kernel and userspace</li>
</ul>
<h4 id="procedure">Procedure:</h4>
<ol type="1">
<li><p>Run <code>strace</code> on the provided program</p>
<ul>
<li>Locate the lines corresponding to call(s) to your syscall in the output and put them into assignment.md</li>
</ul></li>
<li><p>Answer question 0 in assignment.md</p>
<ul>
<li>Suggested: make use of the system‚Äôs manual pages</li>
</ul></li>
<li><p>Find the syscall definition within the kernel source</p>
<ul>
<li><p>Put the location into assignment.md</p></li>
<li><p>Suggested: make use of <a href="https://elixir.bootlin.com/">elixir</a> or <a href="http://cscope.sourceforge.net/">cscope</a></p></li>
</ul></li>
<li><p>Answer question 1 in the assignment.md file</p>
<ul>
<li>Who last modified your syscall‚Äôs code? What were they trying to do?</li>
</ul></li>
<li><p>Write a <code>bpftrace</code> snippet to insert a probe that will print the syscall args and kernel stack in real time as the syscall is invoked</p>
<ul>
<li><p>Ensure that the bpf probe is only triggered when our specific command is run</p></li>
<li><p>Suggested: <a href="https://github.com/iovisor/bpftrace/blob/master/docs/reference_guide.md#5-str-strings">bpftrace/reference_guide.md at master</a></p></li>
<li><p>Hint: A script file must be marked as executable to be run</p></li>
<li><p>Hint: The first line of an executable <code>bpftrace</code> file must be ‚Äú<code>#!/usr/bin/env bpftrace</code>‚Äù</p></li>
</ul></li>
<li><p>Re-run the program with the bpf probe inserted via your <code>bpftrace</code> code</p>
<ul>
<li>Save the results into assignment.md</li>
</ul></li>
<li><p>Document your process in the cover letter as always</p></li>
</ol>
<h4 id="tools-of-interest">Tools of interest</h4>
<ul>
<li><p><code>strace</code></p></li>
<li><p><code>man</code></p></li>
<li><p><code>cscope</code></p></li>
<li><p><code>git-blame</code></p></li>
<li><p><code>git-grep [ -n ]</code></p></li>
<li><p><code>bpftrace</code> and other BPF tooling</p></li>
</ul>
<h4 id="what-to-submit">What to submit</h4>
<ul>
<li><p>A cover letter following the assignment submission guidelines (as always)</p></li>
<li><p>A patch that includes your changes to <code>assignment.md</code></p></li>
<li><p>A patch that includes the new entries in log.txt from all the times you ran the program</p></li>
<li><p>A patch that includes two full logs from strace from running the program. Once as your regular user and once as running as root using <code>sudo</code>. Make sure you label which is which</p></li>
<li><p>A patch that adds your <code>*.bp</code> <code>bpftrace</code> program</p></li>
</ul>
<p><a href="submission_guidelines.html">Submission Guidelines</a></p>
